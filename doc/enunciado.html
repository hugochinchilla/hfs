<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xml:lang="ca" dir="ltr" xmlns="http://www.w3.org/1999/xhtml" 
lang="es"><head>


<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="enunciado_files/styles.css">
<link rel="stylesheet" type="text/css" href="enunciado_files/styles_002.css">

<!--[if IE 7]>
    <link rel="stylesheet" type="text/css" href="https://ce.uib.es/estudis1011/theme/standard/styles_ie7.css" />
<![endif]-->
<!--[if IE 6]>
    <link rel="stylesheet" type="text/css" href="https://ce.uib.es/estudis1011/theme/standard/styles_ie6.css" />
<![endif]-->


    <meta name="keywords" content="moodle, 4520_080 201011: Enunciado de  la práctica, 2010/11 ">
    <title>4520_080 201011: Enunciado de la práctica, 2010/11</title>
    <link rel="shortcut icon" href="https://ce.uib.es/estudis1011/theme/ce_css_mdl/favicon.ico">


</head><body class="mod-resource course-2315 dir-ltr lang-ca_utf8" 
id="mod-resource-view">

<div id="page">

    <div id="content"><div class="box generalbox generalboxcontent 
boxaligncenter clearfix">
<h1 style="text-align: center; margin-bottom: 0cm;"><font 
style="font-size: 16pt;" size="4"><b>Práctica de Ampliación de Sistemas 
Operativos</b></font></h1>
<p style="margin-bottom: 0cm;"><br> </p>
<p style="margin-bottom: 0cm;" align="center">Curso 2010/11</p>
<p style="margin-bottom: 0cm;"><br> </p>
<h2 style="margin-bottom: 0cm;"><font size="4">Introducción</font></h2>
<p style="margin-bottom: 0cm;">La práctica implementará un sistema de 
ficheros en disco, el módulo de gestión de ficheros del sistema 
operativo y la interacción de procesos de usuarios.</p>
<p style="margin-bottom: 0cm;"><img 
src="enunciado_files/esquema2009.png" alt="Esquema de la práctica" 
title="Esquema de la práctica" border="0" height="450" hspace="0" 
vspace="0" width="600"><br></p>
<p style="margin-bottom: 0cm;"><br> </p>
<h2 style="margin-bottom: 0cm;"><font size="4">Estructura general</font></h2>
<p style="margin-bottom: 0cm;">La práctica estará compuesta por los 
siguientes elementos:</p>
<ul>
  <li value="1">
    <p style="margin-bottom: 0cm;">Un conjunto de <span 
style="font-weight: bold;">bibliotecas</span>, divididas en niveles, que
 proporcionan las primitivas para acceder al sistema de ficheros y 
gestionarlo.</p> </li>
</ul>
<ul>
  <li>
    <p style="margin-bottom: 0cm;">Un programa <i style="font-weight: 
bold;">mi_mkfs</i><span style="font-style: normal;"> </span>para crear, 
con la ayuda de dichas bibliotecas, el sistema de ficheros en el disco.<br>El
 sistema de ficheros estará realmente contenido en un fichero <i 
style="font-weight: bold;">disco.imagen</i><span style="color: rgb(0, 0,
 0);"> del sistema operativo con la siguiente estructura:<br><img 
src="enunciado_files/sistema_ficheros.png" alt="sistema de ficheros" 
title="sistema de ficheros" border="0" height="114" hspace="0" 
vspace="0" width="596"><br></span></p> </li>
</ul>
<ul style="color: rgb(0, 0, 0);">
  <li value="1">
    <p style="margin-bottom: 0cm;">Un programa que muestre el contenido 
de un fichero por pantalla (<i style="font-weight: bold;">mi_cat</i>), 
uno que cambie sus permisos de acceso (<i style="font-weight: bold;">mi_chmod</i>),
 uno uno que cree enlaces físicos (<i style="font-weight: bold;">mi_ln</i>),
 uno que liste directorios (<i style="font-weight: bold;">mi_ls</i>), 
uno que borre ficheros y directorios (<i style="font-weight: bold;">mi_rm</i>),
 uno que muestre la metainformación de un fichero (<i 
style="font-weight: bold;">mi_stat</i>).<br>Estos programas acceden al 
sistema de ficheros a través de las primitivas de las bibliotecas.<br>Su
 funcionamiento es similar al funcionamiento básico de los 
correspondientes programas <span style="font-style: italic;">cat</span>,
 <span style="font-style: italic;">chmod</span>, <span 
style="font-style: italic;"></span><span style="font-style: italic;">ln</span>,
 <span style="font-style: italic;"></span><span style="font-style: 
italic;">ls</span>, <span style="font-style: italic;"></span><span 
style="font-style: italic;"></span><span style="font-style: italic;">rm</span>/<span
 style="font-style: italic;">rmdir</span><span style="font-style: 
italic;"></span>, <span style="font-style: italic;">stat</span><span 
style="font-style: italic;"> </span>de GNU/Linux.<br></p> </li>
</ul>
<ul>
  <li value="1">
    <p style="margin-bottom: 0cm;"><span style="color: rgb(0, 0, 0);">Un
 programa </span><span style="font-weight: bold; color: rgb(0, 0, 0);">simulador</span><span
 style="color: rgb(0, 0, 0);"> encargado de crear unos </span><span 
style="font-weight: bold; color: rgb(0, 0, 0);">procesos </span>de 
prueba que manejen ficheros de modo que se pueda comprobar el correcto 
funcionamiento de las citadas bibliotecas.<br> </p> </li>
</ul><br>
<h2 style="margin-bottom: 0cm;"><font size="4">Requerimientos</font></h2>
<p style="margin-bottom: 0cm;">Los requerimientos mínimos son:</p>
<ul>
  <li>
    <p style="margin-bottom: 0cm;">El sistema de ficheros deberá ser 
jerárquico con estructura de árbol; es decir, deben poder crearse 
subdirectorios.</p> </li>
  <li>
    <p style="margin-bottom: 0cm;">El sistema de ficheros debe ser 
indexado (inodos de 128 bytes con 12 punteros directos, 1 puntero 
indirecto simple, 1 puntero indirecto doble y 1 puntero indirecto 
triple).</p></li>
</ul>
<ul>
  <li>Cada fichero (es decir, cada inodo) tendrá una metainformación 
mínima necesaria para las primitivas.</li>
  <li>
    <p style="margin-bottom: 0cm;">El sistema de ficheros debe estar 
preparado para trabajar con un tamaño de bloque comprendido entre 512 
bytes y 4.096 bytes.</p> </li>
  <li>
    <p style="margin-bottom: 0cm;">El nombre del fichero (<i>disco.imagen</i>)
 que almacenará el sistema de ficheros deberá ser dinámico; es decir, no
 estará definido en los programas fuentes.</p> </li>
  <li>
    <p style="margin-bottom: 0cm;">La asignación de espacio a los 
ficheros deberá ser dinámica: se asignarán nuevos bloques a medida que 
hagan falta.</p> </li>
  <li>
    <p style="margin-bottom: 0cm;">En las bibliotecas deben 
implementarse métodos de control de concurrencia para acceder a los 
datos de gestión del sistema de ficheros (superbloque, mapa de bits y 
array de inodos): hay que definir secciones críticas y usar<span 
style="font-style: italic;"></span> semáforos donde corresponda.</p></li>
</ul>
<ul>
  <li>Dentro de las bibliotecas no se ha de controlar el acceso 
concurrente de varios procesos a los datos de un mismo fichero.<br>Si 
hace falta, los procesos externos deberán encargarse de dicho control.<br></li>
</ul>
<p style="margin-bottom: 0cm;"><br> </p>
<h2 style="margin-bottom: 0cm;"><font size="4">Primitivas de acceso</font></h2>
<p style="margin-bottom: 0cm;">Las siguientes operaciones son las 
mínimas que deben estar programadas en las bibliotecas del sistema de 
ficheros:</p>
<ol>
  <li>
    <p style="margin-bottom: 0cm;"><i style="font-style: italic;">mi_</i><i
 style="font-style: italic;">dir</i><span style="font-style: italic;"></span><br>Obtiene
 el contenido de un directorio en una cadena de caracteres (puede 
separar su contenido por ':') y obtiene el número de ficheros listado.</p>
 </li>
</ol>
<ol start="2">
  <li>
    <p style="margin-bottom: 0cm;"><i>mi_</i><i>stat</i><span 
style="font-style: italic;"><br></span>Obtiene la metainformación de un 
fichero (es decir, la de su inodo).</p> </li>
</ol>
<ol start="3">
  <li>
    <p style="margin-bottom: 0cm;"><i>mi_</i><i>read</i><br>Lee una 
cantidad determinada de bytes de un fichero, desde una posición inicial,
 los pone en un <i>buffer</i><span style="font-style: normal;"> de 
memoria y obtiene la cantidad total de bytes leídos.</span></p> </li>
</ol>
<ol start="4">
  <li>
    <p style="margin-bottom: 0cm;"><i>mi_</i><i>write</i><br> Escribe en
 un fichero, desde una posición inicial<span style="font-style: normal;">,</span>
 una cantidad determinada de bytes a partir de un <i>buffer</i><span 
style="font-style: normal;"> de memoria</span><span style="font-style: 
normal;"> y devuelve la cantidad total de bytes escritos.</span></p> </li>
</ol>
<ol start="5">
  <li>
    <p style="margin-bottom: 0cm;"><i>mi_</i><i>creat</i><br>Crea el 
fichero especificado.</p> </li>
</ol>
<ol start="6">
  <li>
    <p style="margin-bottom: 0cm;"><i>mi_</i><i>link</i><br>Crea el 
enlace de una entrada de directorio al inodo especificado por otra 
entrada de directorio.<br><br></p></li>
  <li><i>mi_</i><i>unlink</i><br>Borra el enlace físico especificado y, 
en caso de que sea el último existente, borrar el propio fichero.<br><br></li>
  <li><i>mi_</i><span style="font-style: italic;">chmod<br></span>Cambia
 los permisos de acceso al fichero.<span style="font-style: italic;"><br></span></li>
</ol>Todas las operaciones devuelven -1 si no se realizaron 
correctamente.
<p style="margin-bottom: 0cm;"><br> </p>
<h2 style="margin-bottom: 0cm;"><font size="4">Simulación<br></font></h2>
<p style="margin-bottom: 0cm; color: rgb(0, 0, 0);">La simulación consta
 de tres partes.</p>
<h4 style="margin-bottom: 0cm; color: rgb(0, 0, 0);">1) Escrituras 
simultáneas en el sistema de ficheros<br></h4>
<p style="margin-bottom: 0cm; color: rgb(0, 0, 0);">Antes de comenzar, 
se creará el directorio "<span style="font-family: courier 
new,courier,monospace;">simul_<span style="font-style: italic;">aaaammddhhmmss</span></span>",
 donde <span style="font-style: italic;">aaaa </span>es el año, <span 
style="font-style: italic;">mm </span>es el mes, <span 
style="font-style: italic;">dd </span>es el día, <span 
style="font-style: italic;">hh </span>es la hora, <span 
style="font-style: italic;">mm </span>es el minuto y <span 
style="font-style: italic;">ss </span>es el segundo de creación.</p>
<p style="margin-bottom: 0cm; color: rgb(0, 0, 0);">Se han de generar 
100 procesos de prueba cada 0,2 segundos. Cada proceso creará un 
directorio llamado "<span style="font-family: courier 
new,courier,monospace;">proceso_n</span>", donde n es el PID del 
proceso, dentro del directorio "<span style="font-family: courier 
new,courier,monospace;">simul_aaaammddhhmmss</span>".</p>
<p style="margin-bottom: 0cm; color: rgb(0, 0, 0);">Además, dentro del 
directorio "<span style="font-family: courier new,courier,monospace;">proceso_n</span>",
 cada proceso creará un fichero "<span style="font-family: courier 
new,courier,monospace;">prueba.dat</span>".</p>
<p style="margin-bottom: 0cm; color: rgb(0, 0, 0);">Cada 0,05 segundos 
cada proceso escribirá dentro del fichero "<span style="font-family: 
courier new,courier,monospace;">prueba.dat</span>" 50 veces un registro 
(binario), de 16 bytes, con la siguiente estructura de datos:<br></p>
<ul>
  <li> Entero con la fecha y hora en forma <span style="font-style: 
italic;">epoch</span></li>
  <li> Entero con el PID del proceso que lo creó</li>
  <li> Entero con el número de escritura (de 1 a 50)<br></li>
  <li> Entero con la posición del registro dentro del fichero (número de
 registro)<br></li>
</ul>
<p style="margin-bottom: 0cm; color: rgb(0, 0, 0); margin-left: 40px;">Esta
 posición se elegirá de manera aleatoria, teniendo en cuenta que el 
registro puede ocupar cualquier ubicación dentro del espacio de datos 
del fichero. De esta manera comprobaremos el correcto funcionamiento de 
los punteros directos e indirectos de los inodos.<br> No importa si 
algún registro sobreescribe alguno de los registros anteriores.</p>
<p style="margin-bottom: 0cm; color: rgb(0, 0, 0); margin-left: 40px;"><img
 title="Posición del registro" alt="Posición del registro" 
src="enunciado_files/simulacion2009.png" border="0" height="166" 
hspace="0" vspace="0" width="423"><br></p>
<p style="margin-bottom: 0cm; color: rgb(0, 0, 0);"> </p>
<h4 style="margin-bottom: 0cm; color: rgb(0, 0, 0);">2) Verificación de 
las escrituras<br> </h4>
<p style="margin-bottom: 0cm; color: rgb(0, 0, 0);">Cuando acaben las 
escrituras, otro programa independiente verificará el fichero "<span 
style="font-family: courier new,courier,monospace;">prueba.dat</span>" 
de cada proceso y generará la siguiente información:<br></p>
<ul>
  <li> Proceso: escribir el PID</li>
  <li> Número de escrituras: escribir el contador de los registros <span
 style="font-style: italic;">validados</span> dentro del fichero "<span 
style="font-family: courier new,courier,monospace;">prueba.dat</span>" 
(se validan verificando que el campo PID coincida)</li>
  <li> Primera escritura: escribir la menor fecha y hora en forma <span 
style="font-style: italic;">epoch</span> y el el número de escritura en 
que ocurrió<br></li>
  <li> Última escritura: escribir la mayor fecha y hora en forma <span 
style="font-style: italic;">epoch</span> y número de escritura en que 
ocurrió</li>
  <li> Menor posición: escribir la posición más baja y el número de 
escritura en que ocurrió<span style="font-style: italic;"></span></li>
  <li>Mayor posición: escribir la posición más alta y el número de 
escritura en que ocurrió</li>
</ul><br>
<h4 style="margin-bottom: 0cm; color: rgb(0, 0, 0);">3) Pruebas con <i 
style="font-weight: bold;">mi_cat</i>, <i style="font-weight: bold;">mi_chmod</i>,
 <i style="font-weight: bold;">mi_ln</i>, <i style="font-weight: bold;">mi_ls</i>,
 <i style="font-weight: bold;">mi_rm</i>, <i style="font-weight: bold;">mi_stat</i>
 </h4>
<p style="margin-bottom: 0cm; color: rgb(0, 0, 0);">Por último, con la 
ayuda de la infraestructura recién creada, diseñar un <span 
style="font-style: italic;">script</span> (o varios <span 
style="font-style: italic;">scripts</span>) que muestre el correcto 
funcionamiento de los programas <i style="font-weight: bold;">mi_cat</i>,
 <i style="font-weight: bold;">mi_chmod</i>, <i style="font-weight: 
bold;">mi_ln</i>, <i style="font-weight: bold;">mi_ls</i>, <i 
style="font-weight: bold;">mi_rm</i>, <i style="font-weight: bold;">mi_stat</i>
 desarrollados.<br></p></div>
</div>
</div>
</body></html>
